@use '../style' as *;

// --- 1. 창(Window) 등장 애니메이션 ---
@keyframes widget-load-in {
  from {
    opacity: 0;
    transform: translateY(20px) scale(0.98);
  }
  to {
    opacity: 1;
    transform: translateY(0) scale(1);
  }
}

// --- 2. CRT 스캔라인 애니메이션 ---
@keyframes scan-line-vertical {
  0% {
    transform: translateY(-100%);
  }
  100% {
    transform: translateY(100%);
  }
}

.arena-create-container {
  position: relative;
  width: 90%;
  min-height: 87vh;
  background: radial-gradient(circle at 20% 20%, #02010a, #000);
  color: #eafaff;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: flex-start;
  padding: 2% 20px 40px;
  font-family: 'Orbitron', sans-serif;
  overflow-x: hidden;

  @media (max-width: 768px) {
    padding: 60px 20px;
    min-height: 100vh;
    width: 100%;
  }
  @media (max-width: 576px) {
    padding: 40px 15px;
  }

  // CRT 오버레이
  .crt-overlay {
    position: absolute;
    inset: 0;
    background: repeating-linear-gradient(
      0deg,
      rgba(255, 255, 255, 0.03) 0px,
      rgba(255, 255, 255, 0.03) 1px,
      transparent 2px
    );
    pointer-events: none;
    opacity: 0.3;

    &::after {
      content: '';
      position: absolute;
      left: 0;
      right: 0;
      top: 0;
      height: 100%;
      background: linear-gradient(
        0deg,
        transparent 0%,
        rgba(0, 246, 255, 0.1) 50%,
        transparent 100%
      );
      animation: scan-line-vertical 10s linear infinite;
    }
  }

  // 글리치 타이틀
  .glitch-title {
    font-size: 3rem;
    font-weight: 700;
    color: #00f6ff;
    position: relative;
    margin-bottom: 40px;
    text-shadow: 0 0 10px #00ffff, 0 0 20px #00ffff;
    text-align: center;

    &::before, &::after {
      content: attr(data-text);
      position: absolute;
      left: 0;
      width: 100%;
      overflow: hidden;
      color: #00ff6a;
      clip: rect(0, 0, 0, 0);
      animation: glitch 2s infinite;
    }
    &::before { left: 2px; text-shadow: -2px 0 #00ff6a; }
    &::after { left: -2px; text-shadow: 2px 0 #00fff0; }

    @keyframes glitch {
      0% { clip: rect(42px, 9999px, 44px, 0); }
      5% { clip: rect(12px, 9999px, 59px, 0); }
      10% { clip: rect(48px, 9999px, 29px, 0); }
      100% { clip: rect(0, 9999px, 0, 0); }
    }

    @media (max-width: 576px) {
      font-size: 2rem;
      margin-bottom: 30px;
    }
  }

  // ✅ 그리드 레이아웃 (3x2로 수정)
  .arena-grid-layout {
    display: grid;
    width: 95%;
    height: 80%;
    max-width: 1400px;
    gap: 20px;

    // ✅ 3열 레이아웃: main | mode | difficulty
    //                  log  | mode | difficulty
    grid-template-columns: 1.5fr 2fr 1.5fr;
    grid-template-rows: auto auto;
    grid-template-areas:
      'main mode difficulty'
      'log  mode difficulty';

    @media (max-width: 1024px) {
      grid-template-columns: 1fr 1fr;
      grid-template-rows: auto auto auto;
      grid-template-areas:
        'main main'
        'mode difficulty'
        'log  log';
    }

    @media (max-width: 768px) {
      display: flex;
      flex-direction: column;
      width: 100%;
      height: auto;
    }
  }

  // 공통 창 스타일
  .widget-window {
    background: rgba(10, 10, 20, 0.6);
    border: 1px solid rgba(0, 255, 255, 0.2);
    border-radius: 8px;
    backdrop-filter: blur(4px);
    box-shadow: 0 0 15px rgba(0, 255, 255, 0.05),
                0 0 20px rgba(0, 255, 255, 0.1) inset;
    overflow: hidden;
    animation: widget-load-in 0.5s ease-out forwards;
    
    display: flex;
    flex-direction: column;

    &.main-controls { grid-area: main; }
    &.mode-selector  { grid-area: mode; }
    &.difficulty-selector { grid-area: difficulty; } // ✅ 추가
    &.system-log     { grid-area: log; }

    .widget-titlebar {
      background: rgba(0, 246, 255, 0.05);
      padding: 8px 12px;
      font-size: 1.5rem;
      color: #00f6ff;
      border-bottom: 1px solid rgba(0, 255, 255, 0.15);
      text-shadow: 0 0 5px #00f6ff;
      flex-shrink: 0;
    }

    .widget-content {
      padding: 20px;
      overflow-y: auto; 
      flex-grow: 1;

      &::-webkit-scrollbar {
        width: 6px;
      }
      &::-webkit-scrollbar-track {
        background: #00000033;
      }
      &::-webkit-scrollbar-thumb {
        background: #00f6ff55;
        border-radius: 3px;
      }
    }
  }

  // 폼 그룹
  .form-group {
    margin-bottom: 20px;
    
    label { 
      display: block; 
      color: #00f6ff; 
      font-size: 0.9rem; 
      margin-bottom: 6px; 
      letter-spacing: 1px; 
    }
    
    input { 
      width: 100%; 
      padding: 10px; 
      border: 1px solid #00f6ff55; 
      border-radius: 4px; 
      background: #050510; 
      color: #eafaff; 
      transition: 0.2s; 
      font-size: 1rem;
      
      &:focus { 
        outline: none; 
        box-shadow: 0 0 10px #00f6ff; 
      }
    }
  }

  .form-inline {
    display: flex; 
    gap: 20px;
    
    .form-group.small { 
      flex: 1; 
      margin-bottom: 0; 
    }
    
    @media (max-width: 576px) { 
      flex-direction: column; 
      gap: 20px; 
      
      .form-group.small { 
        margin-bottom: 0; 
      } 
    }
  }

  // 모드 선택 (테이블 레이아웃)
  .mode-table-layout {
    display: flex;
    flex-direction: column;
    gap: 10px;
  }

  .mode-row {
    display: flex;
    align-items: center;
    background: rgba(0, 10, 15, 0.7);
    border: 2px solid #222;
    padding: 15px;
    cursor: pointer;
    transition: all 0.2s ease;
    border-radius: 8px;
    width: 100%;

    .mode-icon {
      font-size: 24px;
      margin-right: 15px;
    }
    
    .mode-info {
      display: flex;
      flex-direction: column;
      flex: 1;
    }

    .mode-title {
      color: #00f6ff;
      font-weight: bold;
      font-size: 0.9rem;
      margin-bottom: 3px;
    }

    .mode-desc {
      color: #ccc;
      font-size: 0.8rem;
    }
    
    &:hover {
      border-color: #00f6ff;
      transform: translateY(-2px);
      box-shadow: 0 4px 10px rgba(0, 246, 255, 0.1);
    }
    
    &.selected {
      border-color: #00ff6a;
      background: rgba(0, 255, 106, 0.1);
      box-shadow: 0 0 12px #00ff6a55;
      transform: translateY(-2px);
    }
  }

  // ✅ 난이도 선택 (그리드 레이아웃)
  .difficulty-grid {
    display: grid;
    grid-template-columns: 1fr;
    gap: 12px;
  }

  .difficulty-card {
    background: rgba(0, 10, 15, 0.7);
    border: 2px solid #222;
    padding: 15px;
    cursor: pointer;
    transition: all 0.2s ease;
    border-radius: 8px;
    text-align: center;

    .difficulty-icon {
      font-size: 32px;
      margin-bottom: 8px;
    }

    .difficulty-title {
      color: #00f6ff;
      font-weight: bold;
      font-size: 1rem;
      margin-bottom: 5px;
    }

    .difficulty-desc {
      color: #999;
      font-size: 0.75rem;
    }

    &:hover {
      border-color: #00f6ff;
      transform: translateY(-2px);
      box-shadow: 0 4px 10px rgba(0, 246, 255, 0.1);
    }

    &.selected {
      border-color: #00ff6a;
      background: rgba(0, 255, 106, 0.1);
      box-shadow: 0 0 12px #00ff6a55;
      transform: translateY(-2px);

      .difficulty-title {
        color: #00ff6a;
      }
    }
  }

  // 시스템 로그
  .system-log {
    .widget-content {
      display: flex;
      flex-direction: column;
      height: 90%;
    }
    
    .log-area {
      flex-grow: 1;
      background: #00000033;
      border: 1px solid #00f6ff33;
      border-radius: 4px;
      padding: 10px;
      min-height: 80px;
      margin-bottom: 15px;
      font-size: 0.9rem;
      overflow-y: auto;
      
      .log-entry {
        margin: 0 0 5px;
        
        &.info { color: #999; }
        &.success { color: #00ff6a; } // ✅ 추가
        &.processing { color: #00f6ff; }
        &.error { color: #ff0066; }
      }
    }
  }

  // 버튼
  .neon-button {
    display: block; 
    width: 100%; 
    padding: 12px; 
    background: transparent; 
    border: 2px solid #00f6ff; 
    color: #00f6ff; 
    font-size: 1rem; 
    cursor: pointer; 
    border-radius: 6px; 
    transition: all 0.25s ease; 
    text-transform: uppercase; 
    letter-spacing: 2px;
    
    &:hover { 
      background: #00f6ff22; 
      box-shadow: 0 0 15px #00f6ff; 
    }
    
    &:disabled { 
      opacity: 0.6; 
      cursor: not-allowed; 
    }
  }
}
